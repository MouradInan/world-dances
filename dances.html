<!DOCTYPE html>
<div id="container"></div>
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script type="module">

const data = {'name': 'world_dances', 'children': [{'name': 'Classical', 'children': [{'name': 'Classical', 'children': [{'name': 'France', 'children': [{"name":"Ballet","value":120}]}]}, {'name': 'Hindustani', 'children': [{'name': 'India', 'children': [{"name":"Kathak","value":60},{"name":"Sattriya","value":60}]}]}, {'name': 'Carnatic', 'children': [{'name': 'India', 'children': [{"name":"Odissi","value":60},{"name":"Kuchipudi","value":60}]}]}]}, {'name': 'Folk', 'children': [{'name': 'Flamenco', 'children': [{'name': 'Spain', 'children': [{"name":"Flamenco","value":60},{"name":"Seguidilla","value":10},{"name":"Zambra","value":10}]}]}, {'name': 'Arabic Music', 'children': [{'name': 'Egypt', 'children': [{"name":"Belly Dance","value":15}]}]}, {'name': 'Folk', 'children': [{'name': 'England', 'children': [{"name":"Morris Dance","value":10}]}, {'name': 'Serbia', 'children': [{"name":"Kolo","value":10}]}, {'name': 'Caucasus', 'children': [{"name":"Lezginka","value":10}]}, {'name': 'Peru', 'children': [{"name":"Marinera","value":10},{"name":"Tondero","value":10},{"name":"Zamacueca","value":10},{"name":"Zapateo","value":10}]}, {'name': 'Poland', 'children': [{"name":"Oberek","value":10}]}, {'name': 'Iran', 'children': [{"name":"Qasemabadi","value":10}]}, {'name': 'South Africa', 'children': [{"name":"Rieldans","value":10}]}, {'name': 'Greece', 'children': [{"name":"Sirtaki","value":10},{"name":"Sousta","value":10},{"name":"Syrtos","value":10},{"name":"Trata","value":10},{"name":"Zeibekiko","value":10},{"name":"Zonaradiko","value":10}]}, {'name': 'Ireland', 'children': [{"name":"Step Dance","value":10}]}, {'name': 'Scotland', 'children': [{"name":"Sword Dance","value":10}]}, {'name': 'Italy', 'children': [{"name":"Tarantella","value":10}]}, {'name': 'Philippines', 'children': [{"name":"Tinikling","value":10}]}, {'name': 'Bolivia', 'children': [{"name":"Tinku","value":10}]}, {'name': 'Russia', 'children': [{"name":"Trepak","value":10},{"name":"Troika (dance)","value":10},{"name":"Yablochko","value":10}]}, {'name': 'Hungary', 'children': [{"name":"Verbunkos","value":10}]}, {'name': 'Argentina', 'children': [{"name":"Zamba (art form)","value":10}]}, {'name': 'Turkey', 'children': [{"name":"Zeybek dance","value":10}]}, {'name': 'Germany', 'children': [{"name":"Zwiefacher","value":10}]}, {'name': 'Lebanon', 'children': [{"name":"Zajal","value":10},{"name":"Zajal","value":10}]}, {'name': 'Albania', 'children': [{"name":"Zef","value":10},{"name":"Zef","value":10}]}]}, {'name': 'Hawaiian Folk', 'children': [{'name': 'Hawaii', 'children': [{"name":"Hula","value":15}]}]}, {'name': 'African Folk', 'children': [{'name': 'Ivory Coast', 'children': [{"name":"Mapouka","value":10}]}]}, {'name': 'Drum', 'children': [{'name': 'Native American', 'children': [{"name":"Round Dance","value":10}]}]}, {'name': 'Sean-NÃ³s', 'children': [{'name': 'Ireland', 'children': [{"name":"Sean-N\\u00f3s Dance","value":10}]}]}, {'name': 'Traditional Chinese', 'children': [{'name': 'China', 'children': [{"name":"Traditional Dance","value":10}]}]}, {'name': 'Habanera', 'children': [{'name': 'Cuba', 'children': [{"name":"Upa or Upa Habanera, claimed as the national dance of Cuba","value":10}]}]}, {'name': 'Tsonga Music', 'children': [{'name': 'South Africa', 'children': [{"name":"Xibelani Dance","value":10}]}]}, {'name': 'Modern Folk', 'children': [{'name': 'Japan', 'children': [{"name":"Yosakoi","value":10}]}]}, {'name': 'Ghazal', 'children': [{'name': 'Malaysia', 'children': [{"name":"Zapin","value":10},{"name":"Zapin","value":10}]}]}, {'name': 'Mariachi', 'children': [{'name': 'Mexico', 'children': [{"name":"Zapateado","value":10},{"name":"Zapateado","value":10}]}]}]}, {'name': 'Social', 'children': [{'name': 'Salsa', 'children': [{'name': 'Cuba', 'children': [{"name":"Salsa","value":10}]}]}, {'name': 'Tango', 'children': [{'name': 'Argentina', 'children': [{"name":"Tango","value":15},{"name":"Milonga","value":10}]}]}, {'name': 'Samba', 'children': [{'name': 'Brazil', 'children': [{"name":"Samba","value":10}]}]}, {'name': 'Polka', 'children': [{'name': 'Czech Republic', 'children': [{"name":"Polka","value":5},{"name":"Redowa","value":10}]}]}, {'name': 'Rumba', 'children': [{'name': 'Cuba', 'children': [{"name":"Rumba","value":10}]}]}, {'name': 'Swing', 'children': [{'name': 'USA', 'children': [{"name":"Jive","value":5},{"name":"Swing Dance","value":10},{"name":"Shag (Collegiate)","value":10},{"name":"Shim Sham","value":10},{"name":"Swing Dance","value":10},{"name":"Tap Charleston","value":10},{"name":"Texas Tommy (dance)","value":10},{"name":"Tranky Doo","value":10}]}, {'name': 'United Kingdom', 'children': [{"name":"Quickstep","value":5},{"name":"Skip  Jive","value":10},{"name":"Slow Foxtrot","value":10}]}]}, {'name': 'Cha-cha-cha', 'children': [{'name': 'Cuba', 'children': [{"name":"Cha-cha-cha","value":10}]}]}, {'name': 'Classical', 'children': [{'name': 'Austria', 'children': [{"name":"Viennese Waltz","value":5}]}, {'name': 'France', 'children': [{"name":"Minuet","value":10}]}, {'name': 'Poland', 'children': [{"name":"Polonaise","value":10}]}, {'name': 'United Kingdom', 'children': [{"name":"Regency Dance","value":10}]}]}, {'name': 'Country', 'children': [{'name': 'USA', 'children': [{"name":"Square Dance","value":15},{"name":"Line Dance","value":10},{"name":"Square Dance","value":10},{"name":"Two-step","value":10},{"name":"Virginia Reel","value":10}]}]}, {'name': 'Jazz', 'children': [{'name': 'England', 'children': [{"name":"Quickstep","value":5}]}]}, {'name': 'Zouk', 'children': [{'name': 'Angola', 'children': [{"name":"Kizomba","value":10}]}, {'name': 'Guadeloupe', 'children': [{"name":"Zouk","value":10}]}]}, {'name': 'Merengue', 'children': [{'name': 'Dominican Republic', 'children': [{"name":"Merengue","value":10}]}]}, {'name': 'Reggaeton', 'children': [{'name': 'Puerto Rico', 'children': [{"name":"Reggaeton","value":10}]}]}, {'name': 'Zydeco', 'children': [{'name': 'USA', 'children': [{"name":"Zydeco","value":10},{"name":"Zydeco","value":10},{"name":"Zydeco","value":10},{"name":"Zydeco","value":10}]}]}, {'name': 'Pop', 'children': [{'name': 'Spain', 'children': [{"name":"Macarena","value":5}]}]}, {'name': 'Mambo', 'children': [{'name': 'Cuba', 'children': [{"name":"Mambo","value":10}]}]}, {'name': 'Folk', 'children': [{'name': 'Poland', 'children': [{"name":"Mazurka","value":10}]}, {'name': 'Scotland', 'children': [{"name":"Schottische","value":10}]}, {'name': 'Sweden', 'children': [{"name":"Sl\\u00e4ngpolska","value":10}]}]}, {'name': 'Moombahton', 'children': [{'name': 'USA', 'children': [{"name":"Moombahton","value":10}]}]}, {'name': 'Various', 'children': [{'name': 'USA', 'children': [{"name":"Novelty and Fad Dances","value":5},{"name":"Slow Dance","value":10},{"name":"West Coast Swing","value":10}]}]}, {'name': 'K-pop', 'children': [{'name': 'South Korea', 'children': [{"name":"Oppan Gangnam Style","value":5}]}]}, {'name': 'Punk Rock', 'children': [{'name': 'USA', 'children': [{"name":"Pogo","value":5}]}]}, {'name': 'Banda', 'children': [{'name': 'Mexico', 'children': [{"name":"Quebradita","value":10}]}]}, {'name': 'Rebetiko', 'children': [{'name': 'Greece', 'children': [{"name":"Rebetiko Dances","value":10}]}]}, {'name': 'Early Music', 'children': [{'name': 'Italy', 'children': [{"name":"Renaissance Dance","value":10}]}]}, {'name': 'Baroque', 'children': [{'name': 'France', 'children': [{"name":"Rigaudon","value":10}]}]}, {'name': 'Rock and Roll', 'children': [{'name': 'USA', 'children': [{"name":"Rock and Roll","value":10}]}]}, {'name': 'Sardana', 'children': [{'name': 'Spain', 'children': [{"name":"Sardana","value":10}]}]}, {'name': 'Beach Music', 'children': [{'name': 'USA', 'children': [{"name":"Shag (Carolina)","value":10}]}]}, {'name': 'House', 'children': [{'name': 'USA', 'children': [{"name":"Shuffle","value":10}]}]}, {'name': 'Soca', 'children': [{'name': 'Trinidad and Tobago', 'children': [{"name":"Soca Dance","value":10}]}]}, {'name': 'Son', 'children': [{'name': 'Cuba', 'children': [{"name":"Son","value":10}]}]}, {'name': 'Hip-Hop', 'children': [{'name': 'USA', 'children': [{"name":"Stanky Legg","value":5},{"name":"Whip (dance)","value":5}]}]}, {'name': 'Rock n Roll', 'children': [{'name': 'USA', 'children': [{"name":"The Twist","value":5},{"name":"Twist (dance)","value":5}]}]}, {'name': 'Renaissance', 'children': [{'name': 'France', 'children': [{"name":"Tourdion","value":10}]}]}, {'name': 'Waltz', 'children': [{'name': 'Austria', 'children': [{"name":"Vals","value":10}]}, {'name': 'France', 'children': [{"name":"Valse \\u00e0 deux temps","value":10}]}, {'name': 'Germany', 'children': [{"name":"Waltz","value":10}]}]}]}, {'name': 'Street', 'children': [{'name': 'Hip-Hop', 'children': [{'name': 'USA', 'children': [{"name":"Breakdance","value":10},{"name":"Krumping","value":5},{"name":"Street Dance","value":10}]}]}, {'name': 'Funk', 'children': [{'name': 'USA', 'children': [{"name":"Popping","value":5},{"name":"Locking","value":5}]}]}, {'name': 'Electronic', 'children': [{'name': 'Australia', 'children': [{"name":"Shuffle Dance","value":5}]}]}, {'name': 'Electro', 'children': [{'name': 'France', 'children': [{"name":"Tecktonik","value":10}]}]}, {'name': 'Disco', 'children': [{'name': 'USA', 'children': [{"name":"Waacking","value":10}]}]}]}, {'name': 'Theatrical', 'children': [{'name': 'Traditional Japanese', 'children': [{'name': 'Japan', 'children': [{"name":"Kabuki","value":90},{"name":"Noh Mai","value":60}]}]}, {'name': 'Carnatic', 'children': [{'name': 'India', 'children': [{"name":"Kathakali","value":180}]}]}, {'name': 'Kannada Music', 'children': [{'name': 'India', 'children': [{"name":"Yakshagana","value":180}]}]}, {'name': 'Classical', 'children': [{'name': 'Spain', 'children': [{"name":"Zarzuela","value":120}]}]}]}, {'name': 'Performance', 'children': [{'name': 'Jazz', 'children': [{'name': 'USA', 'children': [{"name":"Jazz Dance","value":15},{"name":"Tap Dance","value":10}]}]}, {'name': 'K-pop', 'children': [{'name': 'South Korea', 'children': [{"name":"K-pop Dance","value":5}]}]}, {'name': 'Bagpipe Music', 'children': [{'name': 'Scotland', 'children': [{"name":"Highland Dance","value":5}]}]}, {'name': 'Orchestral', 'children': [{'name': 'France', 'children': [{"name":"Can-can","value":10}]}]}, {'name': 'House', 'children': [{'name': 'USA', 'children': [{"name":"Vogue","value":10},{"name":"Vogue","value":10}]}]}, {'name': 'Disco', 'children': [{'name': 'USA', 'children': [{"name":"Whacking","value":10}]}]}, {'name': 'A Cappella', 'children': [{'name': 'USA', 'children': [{"name":"Stepping","value":10}]}]}, {'name': 'Flamenco', 'children': [{'name': 'Spain', 'children': [{"name":"Malaguena","value":10},{"name":"Zapateado","value":10}]}]}, {'name': 'Classical', 'children': [{'name': 'Spain', 'children': [{"name":"Pasodoble","value":10}]}]}, {'name': 'Various', 'children': [{'name': 'USA', 'children': [{"name":"Pole Dance","value":10},{"name":"Stiletto Dance","value":10}]}, {'name': 'International', 'children': [{"name":"Vintage dance","value":10}]}]}, {'name': 'Arabic Music', 'children': [{'name': 'Egypt', 'children': [{"name":"Raqs Sharqi","value":15}]}]}, {'name': 'Hip-Hop', 'children': [{'name': 'USA', 'children': [{"name":"Robot Dance","value":5}]}]}, {'name': 'Middle Eastern Folk', 'children': [{'name': 'USA', 'children': [{"name":"Tribal Style Belly Dance","value":15}]}]}]}, {'name': 'Martial', 'children': [{'name': 'Capoeira Music', 'children': [{'name': 'Brazil', 'children': [{"name":"Capoeira","value":20}]}]}]}, {'name': 'Fitness', 'children': [{'name': 'Latin Pop', 'children': [{'name': 'Colombia', 'children': [{"name":"Zumba","value":60},{"name":"Zumba","value":60},{"name":"Zumba","value":60},{"name":"Zumba","value":60},{"name":"Zumba","value":60}]}]}]}, {'name': 'Sacred', 'children': [{'name': 'Gamelan', 'children': [{'name': 'Indonesia', 'children': [{"name":"Rejang","value":15}]}]}, {'name': 'Tibetan Chant', 'children': [{'name': 'Tibet', 'children': [{"name":"Sacred Dance","value":30}]}]}, {'name': 'Various', 'children': [{'name': 'International', 'children': [{"name":"Universal Peace, Dances of","value":10}]}]}, {'name': 'Sufi Music', 'children': [{'name': 'Turkey', 'children': [{"name":"Whirling","value":30}]}]}]}]}

const  format = d3.format(",d")

const color = d3.scaleLinear()
    .domain([0, 5])
    .range(["hsl(224,80%,80%)", "hsl(228,30%,40%)"])
    .interpolate(d3.interpolateHcl)
  const width = 928;
  const height = width;
const pack = data => d3.pack()
    .size([width, height])
    .padding(3)
  (d3.hierarchy(data)
    .sum(d => d.value)
    .sort((a, b) => b.value - a.value))

  const root = pack(data);
  let focus = root;
  let view;

  const svg = d3.create("svg")
      .attr("viewBox", `-${width / 2} -${height / 2} ${width} ${height}`)
      .style("display", "block")
      .style("margin", "0 -14px")
      .style("background", color(0))
      .style("cursor", "pointer")
      .on("click", (event) => zoom(event, root));

  const node = svg.append("g")
    .selectAll("circle")
    .data(root.descendants().slice(1))
    .join("circle")
      .attr("fill", d => d.children ? color(d.depth) : "white")
      .attr("pointer-events", d => !d.children ? "none" : null)
      .on("mouseover", function() { d3.select(this).attr("stroke", "#000"); })
      .on("mouseout", function() { d3.select(this).attr("stroke", null); })
      .on("click", (event, d) => focus !== d && (zoom(event, d), event.stopPropagation()));

  const label = svg.append("g")
      .style("font", "10px sans-serif")
      .attr("pointer-events", "none")
      .attr("text-anchor", "middle")
    .selectAll("text")
    .data(root.descendants())
    .join("text")
      .style("fill-opacity", d => d.parent === root ? 1 : 0)
      .style("display", d => d.parent === root ? "inline" : "none")
      .text(d => d.data.name);

  zoomTo([root.x, root.y, root.r * 2]);

  function zoomTo(v) {
    const k = width / v[2];

    view = v;

    label.attr("transform", d => `translate(${(d.x - v[0]) * k},${(d.y - v[1]) * k})`);
    node.attr("transform", d => `translate(${(d.x - v[0]) * k},${(d.y - v[1]) * k})`);
    node.attr("r", d => d.r * k);
  }

  function zoom(event, d) {
    const focus0 = focus;

    focus = d;

    const transition = svg.transition()
        .duration(event.altKey ? 7500 : 750)
        .tween("zoom", d => {
          const i = d3.interpolateZoom(view, [focus.x, focus.y, focus.r * 2]);
          return t => zoomTo(i(t));
        });

    label
      .filter(function(d) { return d.parent === focus || this.style.display === "inline"; })
      .transition(transition)
        .style("fill-opacity", d => d.parent === focus ? 1 : 0)
        .on("start", function(d) { if (d.parent === focus) this.style.display = "inline"; })
        .on("end", function(d) { if (d.parent !== focus) this.style.display = "none"; });
  }
container.append(svg.node());



</script>

